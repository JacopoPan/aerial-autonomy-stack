name: simulation_tmuxinator

windows:
  - gz_sim:
      layout: even-horizontal
      panes:
        - >
          GZ_SIM_RESOURCE_PATH=$GZ_SIM_RESOURCE_PATH:/git/PX4-Autopilot/Tools/simulation/gz/models:/git/PX4-Autopilot/Tools/simulation/gz/worlds
          gz sim -v4 -r default.sdf
        - ros2 run ros_gz_bridge parameter_bridge /clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock
  - px4_sitl:
      layout: even-horizontal
      panes:
        - >
          sleep 3 &&
          PX4_GZ_MODEL_POSE="0,0,0,0,0,0"
          PX4_SYS_AUTOSTART=4001
          PX4_UXRCE_DDS_NS="Drone1"
          PX4_UXRCE_DDS_PORT=8888
          /git/PX4-Autopilot/build/px4_sitl_default/bin/px4 -i 1
  - px4_sitl:
      layout: even-horizontal
      panes:
        - >
          sleep 6 &&
          PX4_GZ_MODEL_POSE="2,2,0,0,0,0"
          PX4_SYS_AUTOSTART=4001
          PX4_UXRCE_DDS_NS="Drone1"
          PX4_UXRCE_DDS_PORT=8888
          /git/PX4-Autopilot/build/px4_sitl_default/bin/px4 -i 2
  - px4_sitl:
      layout: even-horizontal
      panes:
        - >
          sleep 9 &&
          PX4_GZ_MODEL_POSE="4,4,0,0,0,0"
          PX4_SYS_AUTOSTART=4001
          PX4_UXRCE_DDS_NS="Drone1"
          PX4_UXRCE_DDS_PORT=8888
          /git/PX4-Autopilot/build/px4_sitl_default/bin/px4 -i 3
  - housekeeping:
      layout: even-horizontal
      panes:
        - htop
        - ip a && ss -tuln && echo $ROS_DISTRO && echo $ROS_DOMAIN_ID
        - gosu qgcuser /squashfs-root/AppRun